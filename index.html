<!DOCTYPE html>   
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Jogo do Saci</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      overflow: hidden;
      touch-action: manipulation;
    }

    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url('fundo2.png') repeat-x bottom;
      background-size: contain;
      background-color: #87CEEB;
      animation: moverFundo 60s linear infinite;
    }

    #game.pausado {
      animation-play-state: paused;
    }

    #saci {
      position: absolute;
      bottom: 4vh;
      left: 5vw;
      width: 12vw;
      max-width: 80px;
      height: auto;
    }

    #pedra {
      position: absolute;
      bottom: 4vh;
      right: -20vw;
      width: 8vw;
      max-width: 50px;
      height: auto;
    }

    .jump {
      animation: jump 0.5s ease;
    }

    .jump-longo {
      animation: jump-longo 0.8s ease;
    }

    @keyframes jump {
      0% { bottom: 4vh; }
      50% { bottom: 20vh; }
      100% { bottom: 4vh; }
    }

    @keyframes jump-longo {
      0% { bottom: 4vh; }
      50% { bottom: 28vh; }
      100% { bottom: 4vh; }
    }

    @keyframes moverFundo {
      from { background-position: 0 0; }
      to { background-position: -10000px 0; }
    }

    #mensagem-fim {
      position: absolute;
      top: 40%;
      width: 100%;
      text-align: center;
      font-size: 6vw;
      color: yellow;
      font-weight: bold;
      text-shadow: 2px 2px 5px black;
      display: none;
      z-index: 10;
    }

    #placar {
      position: absolute;
      top: 2vh;
      left: 4vw;
      font-size: 5vw;
      color: white;
      font-weight: bold;
      text-shadow: 1px 1px 3px black;
      z-index: 10;
    }

    @media (max-width: 600px) {
      #saci {
        width: 60px;
        left: 30px;
        bottom: 4vh;
      }

      #pedra {
        width: 40px;
        bottom: 4vh;
      }

      #placar {
        font-size: 18px;
      }

      #mensagem-fim {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="placar">PontuaÃ§Ã£o: 0</div>
    <div id="mensagem-fim">ðŸ’¥ O Saci bateu na pedra! Fim de jogo.</div>
    <img id="saci" src="saci.png" alt="Saci">
    <img id="pedra" src="pedra1.webp" alt="Pedra">
  </div>

  <!-- Sons -->
  <audio id="somPulo" src="pulo.mp3" preload="auto"></audio>
  <audio id="somColisao" src="colisao.mp3" preload="auto"></audio>

  <script>
    const saci = document.getElementById("saci");
    const pedra = document.getElementById("pedra");
    const mensagemFim = document.getElementById("mensagem-fim");
    const placar = document.getElementById("placar");
    const game = document.getElementById("game");

    const somPulo = document.getElementById("somPulo");
    const somColisao = document.getElementById("somColisao");

    let pontuacao = 0;
    let velocidade = 10;

    function atualizarPlacar() {
      placar.innerText = "PontuaÃ§Ã£o: " + pontuacao;
    }

    function pular(tipo = "curto") {
      if (!saci.classList.contains("jump") && !saci.classList.contains("jump-longo")) {
        saci.classList.add(tipo === "longo" ? "jump-longo" : "jump");
        somPulo.currentTime = 0;
        somPulo.play();
        setTimeout(() => {
          saci.classList.remove(tipo === "longo" ? "jump-longo" : "jump");
        }, tipo === "longo" ? 800 : 500);
      }
    }

    document.addEventListener("keydown", function(event) {
      if (event.code === "Space") {
        pular("curto");
      }
    });

    document.addEventListener("click", () => pular("longo"));
    document.addEventListener("touchstart", () => pular("longo"));

    function movePedra() {
      let pedraLeft = window.innerWidth;
      pedra.style.left = pedraLeft + "px";

      const interval = setInterval(() => {
        pedraLeft -= velocidade;
        pedra.style.left = pedraLeft + "px";

        const saciBottom = parseInt(window.getComputedStyle(saci).bottom);
        const pedraRight = pedraLeft + pedra.offsetWidth;

        if (pedraLeft < 130 && pedraRight > 50 && saciBottom < 70) {
          clearInterval(interval);
          somColisao.play();
          mensagemFim.style.display = "block";
          game.classList.add("pausado");
          setTimeout(() => location.reload(), 3000);
        }

        if (pedraLeft < -100) {
          clearInterval(interval);
          pontuacao++;
          atualizarPlacar();

          if (pontuacao % 10 === 0) {
            velocidade += 1;
          }

          setTimeout(movePedra, 500 + Math.random() * 1000);
        }
      }, 30);
    }

    atualizarPlacar();
    movePedra();
  </script>
</body>
</html>

